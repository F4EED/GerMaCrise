<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>À propos - GerMaCrise</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { 
  margin:0; 
  font-family:Arial,sans-serif; 
  transition: background 0.5s, color 0.5s; 
  background:#fff; 
  color:#000; 
  padding:20px; 
}
body.dark { 
  background:#111; 
  color:orange; 
}

h1, h2, h3, p, li { 
  transition: color 0.5s; 
}
a { 
  color:inherit; 
  text-decoration:none; 
}
a:hover { 
  text-decoration:underline; 
}

#aproposContainer { 
  max-width:900px; 
  margin:0 auto; 
}
#logo { 
  display:block; 
  margin:0 auto 20px auto; 
  max-width:150px; 
}

.version { text-align:center; margin-bottom:20px; font-weight:bold; }

ul { padding-left:20px; }
</style>
</head>
<body class="light">
<div id="aproposContainer">
  <img id="logo" src="images/logo_gmc.jpg" alt="Logo GerMaCrise">
  <h1>À propos de GerMaCrise</h1>
  <div class="version">V0.4-Dev</div>
  <p>GerMaCrise est un POC, une application destinée à aider à la gestion de crise en mode offline. Elle permet de visualiser des cartes et suivre des informations importantes en temps réel.</p>
  
  <h2>Objectif</h2>
  <ul>
    <li>Visualisation de cartes hors-ligne</li>
    <li>Gestion de l'utilisateur de l'application</li>
  </ul>

  <h2>Fonctionnalités principales</h2>
  <ul>
    <li>Gestion de l'utilisateur de l'application</li>
    <li>Saisie d'événement</li>
    <li>Visualisation de cartes hors-ligne</li>
    <li>Gestion de documents</li>
    <li>Gestion des lieux d'accueil</li>
    <li>Gestion de l'annuaire de crise</li>
    <li>Gestion des entreprises du secteur</li>
    <li>Gestion des lieux d'accueil</li>
  </ul>

  <h2>Mais qui a écrit ce foutu code</h2>
  <ul>
    <li>En grosse partie ChatGPT (merci à lui, elle,...)</li>
    <li>Merci aussi à Valentin Saugnier pour son aide sur la partie pmtiles de Cartoff</li>
    <li>Et moi mais ça c'est accessoire...</li>
  </ul>
</div>

<script>
// --- Appliquer le thème initial depuis le parent ou localStorage ---
function appliquerTheme(theme){
  document.body.className = theme === 'dark' ? 'dark' : 'light';
}

document.addEventListener('DOMContentLoaded', ()=>{
  // 1. Essayer de récupérer le theme localStorage
  const themeLS = localStorage.getItem('theme');
  if(themeLS) appliquerTheme(themeLS);

  // 2. Demander le thème au parent si possible
  if(window.parent !== window){
    window.parent.postMessage({ type: 'requestTheme' }, '*');
  }
});

// --- Réception du thème depuis le parent ---
window.addEventListener('message', (event)=>{
  // On accepte uniquement les messages contenant {type:'theme', theme:'light/dark'}
  if(event.data?.type === 'theme' && event.data.theme){
    appliquerTheme(event.data.theme);
  }
});
</script>
</body>
</html>
